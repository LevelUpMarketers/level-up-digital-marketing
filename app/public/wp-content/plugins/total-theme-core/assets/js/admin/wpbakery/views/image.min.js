!function(){"use strict";if("object"!=typeof vc||"function"!=typeof vc.shortcode_view)return!1;const e=e=>{const t=e.querySelector(".vcex_wpb_image_holder");t&&t.remove()};window.vcexBackendViewImage=vc.shortcode_view.extend({vcexImage:null,changeShortcodeParams:function(t){window.vcexBackendViewImage.__super__.changeShortcodeParams.call(this,t);const a=this.$el[0];let r=t.getParam("source"),c=t.getParam("image_id")||t.getParam("image"),o=t.getParam("external_image"),i=t.getParam("image_custom_field")||t.getParam("custom_field_name"),n=[r,c,o,i].filter((e=>null!=e&&""!==e)).join("|");if(n!==this.vcexImage){if(this.vcexImage=n,!r&&!c||"custom_field"===r&&!i&&!c||"external"===r&&!o&&!c||!c&&("media_library"===r||"primary_term_thumbnail"===r||"term_thumbnail"===r||"callback_function"===r||"card_thumbnail"===r))return e(a);const t=a.querySelector(".wpb_element_wrapper");let m=a.querySelector(".vcex_wpb_image_holder");if(!t)return;const s=new URLSearchParams({action:"vcex_wpb_backend_view",view:"image",image_source:r,external_image:o,custom_field_image:i,image_id:c,size:"thumbnail",post_id:vc_post_id,_vcnonce:window.vcAdminNonce});fetch(window.ajaxurl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:s.toString()}).then((e=>{if(!e.ok)throw new Error("Network response was not ok: "+e.statusText);return e.text()})).then((c=>{if(!c)return e(a);if(m){let e=m.querySelector("img");e&&e.setAttribute("src",c)}else{m=document.createElement("div"),m.className="vcex_wpb_image_holder",t.appendChild(m);const e=document.createElement("img");e.src=c,m.appendChild(e)}"external"===r&&o&&(o.endsWith("logo.svg")||o.endsWith("logo-dark.svg"))?m.classList.add("vcex_wpb_image_holder--scale-down"):m.classList.remove("vcex_wpb_image_holder--scale-down")})).catch((e=>{console.error("Error:",e)}))}}})}();