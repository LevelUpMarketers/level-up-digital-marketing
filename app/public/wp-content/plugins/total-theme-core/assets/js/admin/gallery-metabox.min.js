!function(e,t){"use strict";e(document).ready((function(){let a;const i=e("#wpex_image_gallery_field"),l=e("#wpex_gallery_images_container ul.wpex_gallery_images"),o=()=>{let t=[];e("#wpex_gallery_images_container ul li.image").each((function(){t.push(jQuery(this).attr("data-attachment_id"))})),i.val(t.join(","))};jQuery(".add_wpex_gallery_images").on("click","a",(function(e){e.preventDefault(),a?a.open():a=wp.media({title:t.title,button:{text:t.button},library:{type:"image"},multiple:!0,autoSelect:!1}).on("select",(function(e){a.state().get("selection").map((function(e){(e=e.toJSON()).id&&e.url&&(l.append(`<li class="image" data-attachment_id="${e.id}"><div class="attachment-preview"><div class="thumbnail"><img src="${e.url}"></div><a href="#" class="wpex-gmb-remove">${t.remove}</a></div></li>`),o())}))})).open()})),l.sortable({items:"li.image",cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,forceHelperSize:!1,helper:"clone",opacity:.65,placeholder:"wpex-metabox-sortable-placeholder",start:function(e,t){t.item.css("background-color","#f6f6f6")},stop:function(e,t){t.item.removeAttr("style")},update:function(e,t){o()}}),e("#wpex_gallery_images_container").on("click","a.wpex-gmb-remove",(function(t){t.preventDefault(),e(this).closest("li.image").remove(),o()}))}))}(jQuery,wpexGalleryMetaboxL10n);