!function(e,t){"use strict";e(document).ready((function(){const i=()=>{e(".wpex-widget-settings-form .wpex-repeater-field").each((function(){var t=e(this).attr("id"),i=e("#"+t);i.sortable({revert:!1,delay:100,cursor:"move",placeholder:"wpex-rpf-placeholder",opacity:.8,start:function(e,t){t.placeholder.height(t.item.height())},update:function(e,t){i.find("input").eq(0).trigger("change")}})}))},n=()=>{var t=!0,i=wp.media.editor.send.attachment;e(document).on("click",".wpex-widget-settings-form .wpex-upload-button",(function(){window.wpActiveEditor=null;wp.media.editor.send.attachment;var n=e(this).prev();return t=!0,wp.media.editor.send.attachment=function(e,d){if(!t)return i.apply(this,[e,d]);n.val(d.id).trigger("change")},wp.media.editor.open(),!1})),e(".add_media").on("click",(function(){t=!1}))},d=()=>{i(),n()};e("body").on("click",".wpex-widget-settings-form .wpex-rpf-add",(function(t){t.preventDefault();var i=e(this).closest(".wpex-widget-settings-form"),n=i.find(".wpex-rpf-clone"),d=e("<li>"+n.html()+"</li>");i.find(".wpex-repeater-field").append(d),d.find(":focusable").eq(0).focus()})),e("body").on("click",".wpex-widget-settings-form .wpex-rpf-remove",(function(i){i.preventDefault(),confirm(t.confirm)&&(e(this).parent().find('input[type="text"]').trigger("change"),e(this).closest("li").remove())})),i(),n(),e(document).on("widget-updated",d),e(document).on("widget-added",d)}))}(jQuery,wpexCustomWidgets);