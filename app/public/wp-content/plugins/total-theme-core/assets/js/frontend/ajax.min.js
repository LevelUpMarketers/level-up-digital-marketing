!function(){const e={};let t=!1;const a=(e,t=10)=>{let a=null;return(...r)=>{window.clearTimeout(a),a=window.setTimeout((()=>{e.apply(null,r)}),t)}},r=()=>parseInt(vcex_ajax_params.session_storage),n=e=>JSON.stringify(e),o=(t,a,r)=>{e.hasOwnProperty(t)||(e[t]={}),e[t].hasOwnProperty(a)||(e[t][a]={}),r.hasOwnProperty("html")&&(e[t][a].html=r.html),r.hasOwnProperty("counts")&&(e[t][a].counts=r.counts)},c=()=>{window.dispatchEvent(new CustomEvent("vcexAfterAjaxSuccess"))},i=(t,a,c,i,s=!0)=>{r()||(s=!1);let l="",d="";if(s){let a={...c};a.hasOwnProperty("entry_count")&&delete a.entry_count,a.hasOwnProperty("running_count")&&delete a.running_count,a.hasOwnProperty("paged")&&1===a.paged&&delete a.paged,l=n(a),d=((t,a)=>{if(e.hasOwnProperty(t)&&e[t].hasOwnProperty(a))return e[t][a]})(t,l),a=null}if(d)return new Promise(((e,t)=>{setTimeout((()=>{e(d)}),50)}));{const e=new FormData;return e.append("action","vcex_ajax_action"),e.append("nonce",vcex_ajax_params.nonce),e.append("shortcodeClass",a),e.append("shortcodeAtts",JSON.stringify(c)),i&&e.append("data",JSON.stringify(i)),fetch(vcex_ajax_params.ajax_url,{method:"POST",credentials:"same-origin",body:e}).then((e=>e.json())).then((e=>(s&&o(t,l,e.data),e.data))).catch((e=>{console.log("[TotalTheme Core Load More]"),console.error(e)}))}},s=e=>{const t=e.id;if(!t)return;let a=e.getAttribute("data-vcex-filter-selection");if(!a)return;if(a=JSON.parse(a),0===Object.keys(a).length)return;const r={selection:a},n=document.querySelector(`[data-vcex-ajax-filter-target="${t}"]`);return n?(n.getAttribute("data-vcex-ajax-filter-multiple")&&(r.multiple=1,n.hasAttribute("data-vcex-ajax-filter-relation")&&(r.relation=n.getAttribute("data-vcex-ajax-filter-relation")),n.hasAttribute("data-vcex-ajax-filter-meta-relation")&&(r.meta_relation=n.getAttribute("data-vcex-ajax-filter-meta-relation"))),n.hasAttribute("data-vcex-ajax-filter-ignore-tax-query")&&(r.ignore_tax_query=n.getAttribute("data-vcex-ajax-filter-ignore-tax-query")),r):r},l=()=>"function"==typeof jQuery,d=()=>{"function"==typeof VcWaypoint&&VcWaypoint.refreshAll(),"function"==typeof Waypoint&&Waypoint.refreshAll()},u=e=>{"function"==typeof window.vc_rowBehaviour&&setTimeout(window.vc_rowBehaviour),"function"==typeof window.vcexMilestone&&window.vcexMilestone(e),"object"==typeof wpex&&("function"==typeof wpex.hoverStyles&&wpex.hoverStyles(),"function"==typeof wpex.equalHeights&&wpex.equalHeights(e)),"function"==typeof vc_waypoints?vc_waypoints():e.querySelectorAll(".wpb_animate_when_almost_visible").forEach((e=>{e.classList.add("wpb_start_animation animated")})),"function"==typeof wpexIsotope&&e.querySelector(".wpex-masonry-grid")&&wpexIsotope(e),"function"==typeof vcexIsotopeGrids&&e.querySelector(".vcex-isotope-grid")&&vcexIsotopeGrids(e),l()&&("function"==typeof window.wpexSliderPro&&window.wpexSliderPro(jQuery(e)),e.classList.contains("justified-gallery")&&void 0!==jQuery.fn.justifiedGallery&&jQuery.justifiedGallery("norewind"),void 0!==jQuery.fn.mediaelementplayer&&jQuery(e).find("audio, video").mediaelementplayer(),"function"==typeof window.vcexCarousels&&vcexCarousels(e))},x=(e,t)=>new Promise(((a,r)=>{const n=t.querySelector("[data-vcex-class]");if(!n)return r(new Error("[TotalTheme Core data-vcex-class not found]"));const o=()=>{e.innerHTML=n.innerHTML,u(e),"function"==typeof vcexNavbarFilterLinks&&vcexNavbarFilterLinks(),d(),a(e)};if(!!("1"!==vcex_ajax_params.wait_for_images&&!e.querySelector(".wpex-masonry-col"))||"function"!=typeof imagesLoaded)return o();imagesLoaded(t,(function(e){return o()}))})),v=(e,t)=>new Promise(((a,r)=>{const n=!("1"!==vcex_ajax_params.wait_for_images&&!e.querySelector(".wpex-masonry-col")),o=()=>{if(t.forEach((t=>{t.classList.contains("sticky")&&t.classList.add("vcex-duplicate"),e.appendChild(t)})),u(e),(e=>{if(e&&"function"==typeof Isotope)return!!(e.classList.contains("vcex-isotope-grid")||e.classList.contains("vcex-navbar-filter-grid")||e.classList.contains("wpex-masonry-grid"))||void 0})(e)){var r=Isotope.data(e);r&&(r.appended(t),setTimeout((()=>{r.layout()})))}d(),a(t)};if(!n||"function"!=typeof imagesLoaded)return o();imagesLoaded(t,(function(e){return o()}))}));"function"!=typeof window.vcexAjaxFilter&&(window.vcexAjaxFilter=function(l){l&&l.childNodes||(l=document);const d=e=>e.closest("[data-vcex-ajax-filter]"),u=e=>e.getAttribute("data-vcex-type"),v=e=>e.getAttribute("data-vcex-value"),p=e=>e.getAttribute("data-vcex-ajax-filter-target"),f=e=>{const t=p(e);if(t){const e=t.replace("#","");return document.querySelector(`#${e}`)}},y=e=>{const t=f(e);if(t){const e=t.getAttribute("data-vcex-filter-selection");return e&&void 0!==e?JSON.parse(e):""}},m=e=>{const t=p(e);document.querySelectorAll(`[data-vcex-ajax-filter-target="${t}"]`).forEach((e=>{e.classList.add("wpex-pointer-events-none")}))},g=e=>{const t=p(e);document.querySelectorAll(`[data-vcex-ajax-filter-target="${t}"]`).forEach((e=>{e.classList.remove("wpex-pointer-events-none")}))},b=e=>{A(e)||(e.classList.add("active"),e.setAttribute("data-vcex-selected","1"),!j(e)&&L(d(e))||e.classList.add("wpex-pointer-events-none"))},w=e=>{e.classList.remove("active","wpex-pointer-events-none"),e.removeAttribute("data-vcex-selected");switch(e.tagName.toLowerCase()){case"select":e.removeAttribute("data-vcex-value"),e.selectedIndex=0;break;case"input":switch(e.getAttribute("type")){case"checkbox":e.checked=!1;break;case"range":e.removeAttribute("data-vcex-value");break;default:e.value="",e.removeAttribute("data-vcex-value")}}},h=e=>{e.querySelectorAll("[data-vcex-type]").forEach((e=>{"all"===u(e)?b(e):w(e)})),e.querySelectorAll("input:not([data-vcex-type])").forEach((e=>{switch(e.getAttribute("type")){case"checkbox":e.checked=!1;break;case"select":e.selectedIndex=0;break;default:e.value=""}}))},A=e=>"reset"===u(e),j=e=>"all"===u(e)||"all"===v(e),S=e=>j(e)?e.classList.contains("active")||"1"===e.getAttribute("data-vcex-selected")||(e=>{const t=y(e);if(!t)return!0;const a=JSON.stringify(t);return"{}"===a||"[]"===a})(d(e)):e.getAttribute("data-vcex-selected"),L=e=>parseInt(e.getAttribute("data-vcex-ajax-filter-multiple")),_=e=>{const t={},a=p(e);return document.querySelectorAll(`[data-vcex-ajax-filter-target="${a}"] .vcex-ajax-filter-count`).forEach((e=>{const a=e.closest("[data-vcex-type]"),r=u(a);if(!r||!a||"all"===r)return;const n=v(a);r in t?t[r].push(n):t[r]=[n]})),t},q=(e,t)=>{if(t&&void 0!==t&&e.querySelector(".vcex-ajax-filter-count"))if("object"!=typeof t&&(t=JSON.parse(t)),"empty"===t||"0"===t)e.querySelectorAll(".vcex-ajax-filter-count").forEach((e=>{const t=e.closest("[data-vcex-type]");j(t)||A(t)||(e.textContent="(0)",S(t)||(t.classList.add("wpex-pointer-events-none"),t.setAttribute("disabled","")))}));else for(let[a,r]of Object.entries(t))if("all"===a)e.querySelectorAll('[data-vcex-type="all"] .vcex-ajax-filter-count').forEach((e=>{e.textContent=`(${r})`}));else{const t=a.split("|"),n=t[0],o=t[1];e.querySelectorAll(`[data-vcex-type="${n}"][data-vcex-value="${o}"] .vcex-ajax-filter-count`).forEach((e=>{e.textContent=`(${r})`;const t=e.closest("[data-vcex-type]");S(t)||(r&&"0"!==r?(t.classList.remove("wpex-pointer-events-none"),t.removeAttribute("disabled")):(t.classList.add("wpex-pointer-events-none"),t.setAttribute("disabled","")))}))}},O=e=>{const a=u(e);if(!a)return;const r=v(e),n=e.closest("[data-vcex-ajax-filter]"),o=p(n),l=f(n);if(!l)return;const d={},y=L(n),A=j(e);if(A&&S(e))return;const O=l.getAttribute("data-vcex-class"),E=JSON.parse(l.getAttribute("data-vcex-atts"));if(!O||!E)return;let k=!1;const P=e.closest("data-vcex-ajax-filter-group")||n;E.ajax_filter={},"submit"===a?e.disabled=!0:"reset"===a?k=!0:A?h(P):(r?y&&S(e)&&(e=>{const t=e.tagName.toLowerCase();if("button"===t||"a"===t||"div"===t||"span"===t)return!0})(e)?w(e):b(e):w(e),P.querySelectorAll('[data-vcex-type="all"],[data-vcex-value="all"]').forEach((e=>{w(e)})),n.querySelectorAll("[data-vcex-type]").forEach((t=>{t.isSameNode(e)||y||w(t)}))),k?((e=>{const t=p(e);t&&document.querySelectorAll(`[data-vcex-ajax-filter-target="${t}"]`).forEach((e=>{h(e)}))})(n),(e=>{f(e).removeAttribute("data-vcex-filter-selection")})(n),l.setAttribute("data-vcex-current-page","1")):(e=>{const t=p(e);let a={};document.querySelectorAll(`[data-vcex-ajax-filter-target="${t}"] [data-vcex-type][data-vcex-selected="1"]`).forEach((e=>{const t=v(e),r=u(e);if(t&&!j(e)){let n=r,o=t,c=!1;"meta"===r&&e.hasAttribute("data-vcex-key")&&(n=e.getAttribute("data-vcex-key")),"search"!==r&&"order"!==r&&"orderby"!==r&&a.hasOwnProperty(n)&&(c=!0,o=`${t},${a[n]}`),c||(e.hasAttribute("data-vcex-relation")&&(o+=`|${e.getAttribute("data-vcex-relation")}`),e.hasAttribute("data-vcex-include_children")&&(o+=`|${e.getAttribute("data-vcex-include_children")}`),"meta"===r&&(e.hasAttribute("data-vcex-meta-compare")?o+=`|${e.getAttribute("data-vcex-meta-compare")}`:e.hasAttribute("data-vcex-operator")&&(o+=`|${e.getAttribute("data-vcex-operator")}`),e.hasAttribute("data-vcex-meta-type")&&(o+=`|${e.getAttribute("data-vcex-meta-type")}`))),a[n]=o}})),a=JSON.stringify(a).trim(),a&&"{}"!==a||document.querySelectorAll(`[data-vcex-ajax-filter-target="${t}"] [data-vcex-type="all"]`).forEach((e=>{b(e)})),f(e).setAttribute("data-vcex-filter-selection",a)})(n),E.ajax_filter=s(l);const T=n.querySelector('[data-vcex-type="submit"');T&&"submit"!==a&&"reset"!==a?T.disabled=!1:(E.ajax_action="filter",(e=>{t=!0;let a=e.classList.contains("wpex-post-cards")?"wpex-post-cards--loading":"vcex-ajax-loading";e.classList.add(a);const r=e.querySelector(".vcex-ajax-loader");r&&(r.style.display="flex")})(l),m(n),n.setAttribute("data-vcex-ajax-filter-loading",""),n.hasAttribute("data-vcex-ajax-filter-update-counts")&&"1"===n.getAttribute("data-vcex-ajax-filter-update-counts")&&document.querySelector(`[data-vcex-ajax-filter-target="${o}"] .vcex-ajax-filter-count`)&&(d.update_counts="1",d.filter=_(n)),i(o,O,E,d).then((e=>{e.counts&&q(n,e.counts),e.html&&((e,a)=>{const r=(new DOMParser).parseFromString(e,"text/html");r&&x(a,r).then((e=>{t=!1;const n=r.querySelector("[data-vcex-atts]"),o=a.classList.contains("wpex-post-cards")?"wpex-post-cards--loading":"vcex-ajax-loading";a.setAttribute("data-vcex-atts",n.getAttribute("data-vcex-atts")),a.setAttribute("data-vcex-current-page","1"),a.setAttribute("data-vcex-max-pages",n.getAttribute("data-vcex-max-pages")),a.classList.remove(o);const i=a.querySelector(".vcex-ajax-loader");i&&(i.style.display="none"),c()}))})(e.html,l),g(n),n.removeAttribute("data-vcex-ajax-filter-loading")})))},E=e=>{if(t)return;const a=e.target;if(!a.getAttribute("data-vcex-type"))return;const r=a.closest('select, input[type="checkbox"], input[type="hidden"], input[type="range"]');if(!r)return;e.preventDefault();switch(r.getAttribute("type")){case"hidden":break;case"checkbox":r.getAttribute("data-vcex-selected")?r.removeAttribute("data-vcex-value"):r.setAttribute("data-vcex-value",r.value);break;default:const e=r.value;e&&"all"!==e?r.setAttribute("data-vcex-value",e):r.removeAttribute("data-vcex-value")}O(r)},k=a((e=>{if(t||e.key.includes("F5","TAB","SHIFT","ESC"))return;const a=e.target.closest("input[data-vcex-type]");if(!a)return;const r=a.getAttribute("type");if(!a||"checkbox"===r||"range"===r)return;e.preventDefault();const n=a.value;n?a.setAttribute("data-vcex-value",n):a.removeAttribute("data-vcex-value"),O(a)}),500);(()=>{document.querySelectorAll("[data-vcex-ajax-filter]").forEach((t=>{let a=f(t);if(!a)return;const c=a.id,s=a.getAttribute("data-vcex-class"),l=JSON.parse(a.getAttribute("data-vcex-atts"));if(l.ajax_action="filter",l&&s&&(r()&&(l.hasOwnProperty("entry_count")&&delete l.entry_count,l.hasOwnProperty("running_count")&&delete l.running_count,o(c,n(l),{html:a.outerHTML,ajax_action:"filter"})),t.dataset.vcexAjaxFilterSetCounts)){const a={return:"sort_counts",update_counts:"1",filter:_(t)};t.dataset.vcexAjaxFilterIgnoreTaxQuery&&(a.ignore_tax_query=t.dataset.vcexAjaxFilterIgnoreTaxQuery),m(t),i(c,s,l,a,!1).then((a=>{var o,i,s;q(t,a.counts),r()&&(o=c,i=n(l),s=a.counts,e.hasOwnProperty(o)||(e[o]={}),e[o].hasOwnProperty(i)||(e[o][i]={}),e[o][i].counts=s),g(t)}))}}));const t=window.location.search;let a=new URLSearchParams(t).get("filter");if(!a)return;const c=document.querySelector(`[data-vcex-ajax-filter] [data-vcex-name="${a}"]`);c&&O(c)})(),document.addEventListener("click",(e=>{if(t)return;const a=e.target.closest("a[data-vcex-type],button[data-vcex-type]");a&&(e.preventDefault(),O(a))})),document.addEventListener("change",E),window.addEventListener("keyup",k),document.querySelectorAll('input[data-vcex-type][type="hidden"]').forEach((e=>{e.addEventListener("change",E)}))}),"function"!=typeof window.vcexAjaxPagination&&(window.vcexAjaxPagination=function(e){e&&e.childNodes||(e=document);r()&&document.querySelectorAll('[data-vcex-pagination="numbered_ajax"]').forEach((e=>{const t=JSON.parse(e.getAttribute("data-vcex-atts"));t&&(t.ajax_action="pagination",t.hasOwnProperty("entry_count")&&delete t.entry_count,t.hasOwnProperty("running_count")&&delete t.running_count,o(e.id,n(t),{html:e.outerHTML,ajax_action:"pagination"}))})),document.addEventListener("click",(e=>{const a=e.target.closest('[data-vcex-pagination="numbered_ajax"] a.page-numbers');if(!a)return;if(e.preventDefault(),t)return;const r=a.closest('[data-vcex-pagination="numbered_ajax"]');if(!r.querySelector(".wpex-pagination"))return;const n=r.getAttribute("data-vcex-class");let o=JSON.parse(r.getAttribute("data-vcex-atts")),l=parseInt(r.getAttribute("data-vcex-current-page")),d=r.classList.contains("wpex-post-cards")?"wpex-post-cards--loading":"vcex-ajax-loading";a.classList.contains("next")?l+=1:a.classList.contains("prev")?l-=1:l=parseInt(a.innerText.replace(/\D/g,"")),o.paged=l,r.setAttribute("data-vcex-current-page",l),t=!0,r.classList.add(d);const u=r.querySelector(".vcex-ajax-loader");u&&(u.style.display="flex"),o.ajax_action="pagination";const v=s(r);v&&(o.ajax_filter=v),i(r.id,n,o).then((e=>{e.html&&(e=>{const a=(new DOMParser).parseFromString(e,"text/html");a&&x(r,a).then((e=>{o=JSON.parse(a.querySelector("[data-vcex-atts]").getAttribute("data-vcex-atts")),t=!1,r.classList.remove(d);const n=r.querySelector(".vcex-ajax-loader");n&&(n.style.display="none"),c()}))})(e.html)}))}))}),"function"!=typeof window.vcexAjaxLoadmore&&(window.vcexAjaxLoadmore=function(e){e&&e.childNodes||(e=document);document.addEventListener("click",(e=>{if(button=e.target.closest(".vcex-loadmore-button"),!button)return;if(e.preventDefault(),t)return;const a=button.closest(".vcex-loadmore");if(!a)return;const r=a.closest("[data-vcex-class]");if(!r)return;const n=r.querySelector(".wpex-post-cards-loop");if(!n)return;const o=a.querySelector(".vcex-loadmore-spinner");let d=parseInt(r.getAttribute("data-vcex-current-page"))+1,u=JSON.parse(r.getAttribute("data-vcex-atts")),x=!1;const p=r.getAttribute("data-vcex-class"),f=parseInt(r.getAttribute("data-vcex-max-pages")),y=button.querySelector(".vcex-txt"),m=button.dataset.text,g=button.dataset.loadingText,b=button.dataset.failedText,w=parseInt(button.dataset.infiniteScroll);w||(a.style.minHeight=a.offsetHeight+"px"),t=!0,u.paged=d,w&&a.classList.remove("wpex-invisible"),button.classList.add("wpex-hidden"),a.classList.add("vcex-loading"),y.innerText=g,o&&(w?(o.classList.add("wpex-inline-block"),o.classList.remove("wpex-invisible","wpex-opacity-0")):(o.classList.remove("wpex-hidden"),o.classList.add("wpex-inline-block"))),x=!0,u.ajax_action="load_more";const h=s(r);h&&(u.ajax_filter=h),i(r.id,p,u).then((e=>{e.html?(e=>{const i=(new DOMParser).parseFromString(e,"text/html"),s=i.querySelectorAll(".wpex-post-cards-entry, .wpex-card-list-divider");s&&(r.setAttribute("data-vcex-current-page",d),v(n,s).then((e=>{if(l()&&jQuery(n).trigger("vcexAjaxLoadmoreFinished",[jQuery(s)]),u=JSON.parse(i.querySelector("[data-vcex-atts]").getAttribute("data-vcex-atts")),w&&a.classList.add("wpex-invisible"),button.classList.remove("wpex-hidden"),a.classList.remove("vcex-loading"),y.innerText=m,o&&(w?(o.classList.remove("wpex-inline-block"),o.classList.add("wpex-invisible","wpex-opacity-0")):(o.classList.add("wpex-hidden"),o.classList.remove("wpex-inline-block"))),!w&&x){const t=e[0].querySelector("a");t&&t.focus({preventScroll:!0,focusVisible:!1})}d===f&&(a.style.display="none",button.setAttribute("aria-disabled","true")),t=!1,c()})))})(e.html):y.innerText=b}))}))}),"function"!=typeof window.vcexAjaxInfiniteScroll&&(window.vcexAjaxInfiniteScroll=function(){let e=0;if(!document.querySelector(".vcex-loadmore--infinite-scroll .vcex-loadmore-button"))return;const t=a((t=>{let a=window.scrollY;a>e&&document.querySelectorAll(".vcex-loadmore--infinite-scroll .vcex-loadmore-button").forEach((e=>{var t,a;"true"!==e.getAttribute("aria-disabled")&&(t=e.getBoundingClientRect(),a=document.documentElement,t.bottom<=(window.innerHeight||a.clientHeight)&&t.right<=(window.innerWidth||a.clientWidth))&&e.click()})),e=a}),10);window.addEventListener("scroll",t)});const p=()=>{vcexAjaxFilter()};"interactive"===document.readyState||"complete"===document.readyState?setTimeout(p,0):document.addEventListener("DOMContentLoaded",p,!1),window.addEventListener("load",(()=>{vcexAjaxInfiniteScroll(),vcexAjaxPagination(),vcexAjaxLoadmore()}))}();