!function(e){"use strict";const t=()=>{const t=e(".wpex-edit-template-links-ajax");if(!t.length)return;const a=t.closest("td");if(!a.length)return;const n=a.find("select");if(!n.length)return;const i=e("#wpex-admin-page table tr"),s=n.closest("tr"),c=e(".wpex-edit-template-links-spinner"),o=t.data("hide-rows");n.val()?t.removeClass("hidden"):o&&i.not(s).hide(),e(n).change((function(){var a=e(this).val();t.addClass("hidden"),a?(o&&i.show(),function(a){var n={action:t.data("action"),nonce:t.data("nonce"),template_id:a};c.show(),e.post(ajaxurl,n,(function(e){e&&(t.html(e),t.removeClass("hidden")),c.hide()}))}(a)):(o&&i.not(s).hide(),t.addClass("hidden"))}))};e(document).ready((function(){void 0!==e.fn.chosen&&(e(".wpex-chosen").chosen({disable_search_threshold:10}),e(".wpex-chosen").next(".chosen-container").addClass("wpex-chosen-icon-container"),e(".wpex-chosen-multiselect").chosen({search_contains:!0}),void 0!==e.fn.wpexChosenIcon&&e(".wpex-chosen-icon-select").wpexChosenIcon({search_contains:!0,disable_search_threshold:10}),e("#wpex_header_builder_select_chosen, #wpex_footer_builder_select_chosen").css("width","300")),void 0!==e.fn.wpColorPicker&&e(".wpex-color-field").wpColorPicker(),function(){e(".wpex-admin-tabs__tab").click((function(t){t.preventDefault();var a=e(this),n=a.attr("aria-controls");e(".wpex-admin-tabs__tab").removeClass("nav-tab-active").attr("aria-selected","false"),a.addClass("nav-tab-active").attr("aria-selected","true"),e(".wpex-admin-tabs__panel").each((function(){var t=e(this);t.removeClass("wpex-admin-tabs__panel--active"),n===t.attr("id")&&t.addClass("wpex-admin-tabs__panel--active")}))}));var t=0;e(".wpex-admin-tabs__list").keydown((function(a){var n=e(".wpex-admin-tabs__tab");const i=a.key;"ArrowRight"!==i&&"Escape"!==i||(n.eq(t).attr("tabindex",-1),"ArrowRight"===i?++t>=n.length&&(t=0):"ArrowLeft"===i&&--t<0&&(t=n.length-1)),n.eq(t).attr("tabindex",0),n.eq(t).focus()}))}(),function(){var t=e(".wpex-panel-js-tabs a");if(t.length){var a=e(".wpex-panel-js-tabs a.nav-tab-active").attr("href").substring(1);e(".wpex-"+a).show(),e(t).each((function(){var a=e(this);a.click((function(n){n.preventDefault(),t.removeClass("nav-tab-active"),a.addClass("nav-tab-active");var i=e(this).attr("href").substring(1);e(".wpex-tab-content").hide(),e(".wpex-"+i).show()}))}))}}(),e(".wpex-media-upload-button").click((function(t){t.preventDefault();var a=e(this),n=a.prev(),i=a.parent().find(".wpex-media-live-preview img"),s=a.parent().find(".wpex-media-remove"),c=wp.media({library:{type:"image"},multiple:!1}).on("select",(function(e){var t=c.state().get("selection").first(),o=t.toJSON().id,r=t.toJSON().url;if(s.length&&s.addClass("wpex-show"),i.length)i.attr("src",r);else{var l=(i=a.parent().find(".wpex-media-live-preview")).data("image-size")?i.data("image-size"):"auto";i.append('<img src="'+r+'" style="height:'+l+"px;width:"+l+'px;" />')}n.val(o).trigger("change")})).open()})),e(".wpex-media-remove").each((function(){var t=e(this),a=t.parent().find(".wpex-media-input"),n=a.val(),i=t.parent().find(".wpex-media-live-preview");n&&t.addClass("wpex-show"),t.on("click",(function(){return a.val(""),i.find("img").remove(),t.removeClass("wpex-show"),!1})),a.on("keyup change",(function(){if(!e(this).val())return i.find("img").remove(),t.removeClass("wpex-show"),!1}))})),e(".wpex-custom-css-panel-wrap .form-table").click((function(){e(".wpex-remember-to-save").show()})),e(".wpex-custom-css-panel-wrap .wpex-remember-to-save a").click((function(t){t.preventDefault(),e(".wpex-custom-css-panel-wrap form #submit").click()})),e("#wpex-dashicon-select a").click((function(){return e("#wpex-dashicon-select a.button-primary").removeClass("button-primary").addClass("button-secondary"),e(this).addClass("button-primary"),e(this).parents("#wpex-dashicon-select").next("input").val(e(this).data("value")),!1})),(()=>{const e=document.querySelector(".totaltheme-add-template");if(!e)return;const t=e.closest("td").querySelector("select"),a=a=>{t.value?e.classList.add("hidden"):e.classList.remove("hidden")};t&&t.addEventListener("change",a)})(),t(),e("#wpex-customizer-manager-admin-page").length&&(e(".wpex-customizer-check-all").click((function(){return e(".wpex-customizer-editor-checkbox").each((function(){this.checked=!0})),!1})),e(".wpex-customizer-uncheck-all").click((function(){return e(".wpex-customizer-editor-checkbox").each((function(){this.checked=!1})),!1})))}))}(jQuery);