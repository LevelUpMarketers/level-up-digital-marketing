!function(e){if("string"!=typeof window.ajaxurl)return;const t=document.querySelector(".totaltheme-add-template");if(!t)return;const a=t.querySelector(".totaltheme-add-template__form"),l=t.parentNode.querySelector("select"),s=t.querySelector(".totaltheme-add-template__name"),o=t.querySelector(".totaltheme-add-template__toggle"),d=t.querySelector(".totaltheme-add-template__save"),r=t.querySelector(".totaltheme-add-template__spinner"),n=t.querySelector(".totaltheme-add-template__cancel"),i=a.getAttribute("data-nonce"),m=a.getAttribute("data-type");o.addEventListener("click",(e=>{e.preventDefault(),o.style.display="none",a.classList.add("totaltheme-add-template__form--visible"),s.focus()})),s.addEventListener("input",(e=>{s.classList.remove("totaltheme-add-template__name--invalid")})),n.addEventListener("click",(e=>{e.preventDefault(),o.style.display="",a.classList.remove("totaltheme-add-template__form--visible")})),d.addEventListener("click",(o=>{o.preventDefault();const d=s.value;if(d){const s=new XMLHttpRequest;let o="action=totaltheme_add_template&nonce="+i+"&post_title="+d;m&&(o+="&type="+m),s.onload=function(){if(r.classList.remove("totaltheme-add-template__spinner--visible"),n.style.display="",4==s.readyState&&200==s.status){let s=this.responseText;if(!s)return void alert(e.error);if(s=JSON.parse(this.responseText),s.success&&s.template_id&&(a.remove(),l&&l.add(new Option(d,s.template_id,!1,!0)),t.closest(".totaltheme-admin-wrap"))){const a=t.closest(".totaltheme-admin-wrap").querySelector("#submit");a&&(alert(e.confirm),a.click())}}else alert(e.error),console.log(this.responseText)},s.open("POST",window.ajaxurl,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),s.send(o),r.classList.add("totaltheme-add-template__spinner--visible"),n.style.display="none"}else s.classList.add("totaltheme-add-template__name--invalid"),s.focus()}))}(totaltheme_module_add_template_vars);