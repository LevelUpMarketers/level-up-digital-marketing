!function(e){let t=null,o=null;const c=o=>{const c=t.querySelector(".totaltheme-icon-select__preview"),l=c.querySelector(".totaltheme-icon-select__svg");if("object"==typeof o){if(o=Object.hasOwn(o,"id")?`id_${o.id}`:"",l.innerHTML="",o&&"string"==typeof window.ajaxurl){const t=c.querySelector(".totaltheme-icon-select__preview-loading");t.hidden=!1,async function(t){const o=`action=totaltheme_icon_select_get_icon&icon=${t}&nonce=${e.nonce}`;return(await fetch(window.ajaxurl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},referrerPolicy:"no-referrer",body:o})).text()}(o).then((e=>{e&&(t.hidden=!0,l.innerHTML=e)}))}}else l.innerHTML=o;o?c.classList.remove("totaltheme-icon-select__preview--empty"):c.classList.add("totaltheme-icon-select__preview--empty")},l=e=>{const o=t.querySelector(".totaltheme-icon-select__input");o.value="object"==typeof e?Object.hasOwn(e,"id")?`id_${e.id}`:"":e,o.dispatchEvent(new Event("change"))},a=()=>{const o=document.querySelector(".totaltheme-icon-select-modal");o.classList.add("totaltheme-icon-select-modal--open");const c=o.querySelector(".totaltheme-icon-select-modal__search");c&&(c.value="",c.focus(),o.querySelectorAll(".totaltheme-icon-select-modal__choice--hidden").forEach((e=>{e.classList.remove("totaltheme-icon-select-modal__choice--hidden")}))),async function(){try{const t=await fetch(e.json_url);return await t.json()}catch(e){console.error("Error:",e)}}().then((e=>{((e,t,o)=>{const c=e.querySelector(".totaltheme-icon-select-modal__choices");o&&(o=JSON.parse(o));const l=o?Object.keys(t):Object.keys(t).sort();for(i in l){const e=l[i];if(!(o&&!o.includes(e)||!o&&e.includes("/"))&&t.hasOwnProperty(e)){const o=document.createElement("button");o.className="totaltheme-icon-select-modal__choice",o.setAttribute("data-totaltheme-value",e);const l=document.createElement("span");l.className="totaltheme-icon-select-modal__choice-icon",l.setAttribute("aria-hidden","true"),l.innerHTML=t[e],o.appendChild(l);const a=document.createElement("span");a.className="totaltheme-icon-select-modal__choice-name",a.innerText=e.replace("/"," ").replace(/-/g," "),o.appendChild(a),c.appendChild(o)}}c.classList.remove("totaltheme-icon-select-modal__choices--hidden")})(o,e,t.getAttribute("data-totaltheme-choices"));const c=t.querySelector(".totaltheme-icon-select__input").value,l=o.querySelector(`[data-totaltheme-value="${c}"]`);l&&l.classList.add("totaltheme-icon-select-modal__choice--selected"),o.querySelector(".totaltheme-icon-select-modal__loader").classList.add("totaltheme-icon-select-modal__loader--hidden")})),o.addEventListener("click",n),o.addEventListener("keydown",r),c.addEventListener("input",m)},s=e=>{e.classList.remove("totaltheme-icon-select-modal--open"),e.querySelectorAll(".totaltheme-icon-select-modal__choice").forEach((e=>{e.classList.remove("totaltheme-icon-select-modal__choice--selected")})),t.querySelector(".totaltheme-icon-select__button").focus(),e.querySelector(".totaltheme-icon-select-modal__loader").classList.remove("totaltheme-icon-select-modal__loader--hidden");const o=e.querySelector(".totaltheme-icon-select-modal__choices");o.classList.add("totaltheme-icon-select-modal__choices--hidden"),o.innerHTML="",e.removeEventListener("click",n),e.removeEventListener("keydown",r),e.querySelector(".totaltheme-icon-select-modal__search").removeEventListener("input",m)},n=e=>{const t=e.target;t.closest(".totaltheme-icon-select-modal__choice")?(e.preventDefault(),(e=>{const t=e.closest(".totaltheme-icon-select-modal__choice");let o=t.getAttribute("data-totaltheme-value");o&&"0"!==o&&"none"!==o||(o=""),l(o),c(t.querySelector(".totaltheme-icon-select-modal__choice-icon").innerHTML),s(e.closest(".totaltheme-icon-select-modal"))})(t)):t.closest(".totaltheme-icon-select-modal__close")?(e.preventDefault(),s(t.closest(".totaltheme-icon-select-modal"))):t.closest(".totaltheme-icon-select-modal")&&!t.closest(".totaltheme-icon-select-modal__frame")&&s(t.closest(".totaltheme-icon-select-modal"))},r=e=>{if("Escape"===e.key){const t=e.target.closest(".totaltheme-icon-select-modal");t&&s(t)}},m=e=>{const t=e.target.value.toLowerCase();e.target.closest(".totaltheme-icon-select-modal").querySelectorAll(".totaltheme-icon-select-modal__choice").forEach((e=>{let o=e.getAttribute("data-totaltheme-value").toLowerCase();o=o.replace("/"," ").replace(/-/g," "),o.includes(t)?e.classList.remove("totaltheme-icon-select-modal__choice--hidden"):e.classList.add("totaltheme-icon-select-modal__choice--hidden")}))};document.addEventListener("click",(s=>{s.target.closest(".totaltheme-icon-select__remove")?(s.preventDefault(),(e=>{const t=e.querySelector(".totaltheme-icon-select__input");e.querySelector(".totaltheme-icon-select__svg").innerHTML="",e.querySelector(".totaltheme-icon-select__preview").classList.add("totaltheme-icon-select__preview--empty"),e.querySelector(".totaltheme-icon-select__button").focus(),t.value="",t.dispatchEvent(new Event("change"))})(s.target.closest(".totaltheme-icon-select"))):s.target.closest(".totaltheme-icon-select__actions-library")?(s.preventDefault(),t=s.target.closest(".totaltheme-icon-select"),a()):s.target.closest(".totaltheme-icon-select__actions-media")&&(s.preventDefault(),t=s.target.closest(".totaltheme-icon-select"),e.svg_uploads_allowed?o?o.open():o=wp.media({library:{type:"image/svg+xml"},multiple:!1,autoSelect:!1}).on("select",(function(){const t=o.state().get("selection").first().toJSON();"object"==typeof t&&Object.hasOwn(t,"mime")&&"image/svg+xml"===t.mime?(l(t),c(t)):setTimeout((function(){alert(e.wrong_type_error)}),50)})).open():alert(e.svg_uploads_notice))}))}(totaltheme_module_icon_select_vars);